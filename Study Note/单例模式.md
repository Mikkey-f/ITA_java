# 单例模式

## 一.介绍

### 定义

单例模式确保一个类仅有一个实例，并提供一个全局访问点来获取这个实例。

### 优点

- **资源节约**：避免了重复创建对象带来的资源消耗，像数据库连接池、线程池这类需要集中管理资源的场景，使用单例模式可以有效节省资源。
- **全局访问**：在整个应用程序里，任何地方都能访问这个唯一的实例，这在管理配置信息时非常方便，因为所有模块都能获取到相同的配置。
- **数据一致性**：由于只有一个实例，各个模块对其操作的数据是一致的，避免了数据不一致的问题。





## 二.示例

![image-20250507165051844](C:\Users\24709\AppData\Roaming\Typora\typora-user-images\image-20250507165051844.png)



### 1.饿汉式

```java
package single_;

public class Single01 {
    public static void main(String[] args) {
        //通过方法得到对象
        GirlFriend instance= GirlFriend.getInstance();
        System.out.println(instance);
        GirlFriend instance1=GirlFriend.getInstance();
        System.out.println(instance1);
        //输出是一样的
    }
}
//有一个类，GirlFriend
//只能有一个女朋友
class GirlFriend{
    private String name;
    private static GirlFriend gf=new GirlFriend("fy");
    //饿汉式
    //保障只能创建一个对象
    //1.将构造器私有化
    //2.在类中创建一个对象
    //3.提供一个公共的方法返回gf对象
    private GirlFriend (String name){
        this.name=name;
    }
    public static GirlFriend getInstance(){
        return gf;
    }//为了在静态方法中返回gf对象，需要将其修饰为static

    @Override
    public String toString() {
        return "GirlFriend{" +
                "name='" + name + '\'' +
                '}';
    }
}

```



### 2.懒汉式

```java
package single_;

import java.util.concurrent.Callable;

public class Single02 {
    public static void main(String[] args) {
        //Cat nn = new Cat("nn");
        //System.out.println(Cat.n1);
        Cat instance=Cat.getInstance();
        System.out.println(instance);
        Cat instance1=Cat.getInstance();
        System.out.println(instance1);
    }
}
//希望在程序运行过程中只能创建一个对象
class Cat{
    public static int n1=111;
    private String name;
    private static Cat cat;
    //步骤
    //1.构造器私有化
    //2.定义一个static静态属性对象
    //3.提供一个public的static方法，可以返回一个Cat对象
    //4.只有当用户使用getInstance时，才会创建cat对象
    private Cat(String name) {
        System.out.println("构造器调用。。。。");
        this.name = name;
    }
    public static Cat getInstance(){
        if(cat==null){//如果还没有创建cat对象
            cat=new Cat("huang");
        }
        return cat;
    }//这是静态方法，需要被显示调用才能被执行

    @Override
    public String toString() {
        return "Cat{" +
                "name='" + name + '\'' +
                '}';
    }
}
```



### 3.比较

![image-20250507172930282](C:\Users\24709\AppData\Roaming\Typora\typora-user-images\image-20250507172930282.png)aa